<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>淡入淡出</title>
</head>
<style type="text/css">
div{
	width: 200px;height: 200px;margin:20px;float: left;background: red;filter: alpha (opacity :30); opacity: 0.3;
}
</style>
<script type="text/javascript">
	window.onload = function(){
		var aDiv = document.getElementsByTagName('div');
		for (var i = 0; i < aDiv.length; i++) {
			aDiv[i].alpha = 30;
			aDiv[i].onmouseover = function(){
				starMove(this, 100);
			}

			aDiv[i].onmouseout = function(){
				starMove(this, 30);
			}
		}
	}

	// var alpha = 30;

	function starMove(obj , iTarget){
		clearInterval(obj.timer);
		 obj.timer = setInterval(function(){
		 	var speed = (iTarget - obj.alpha)/6;
		 	speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);

		 	if (iTarget == obj.alpha) {
				clearInterval(obj.timer);
		 	}else{
		 		obj.alpha += speed; 
		 		obj.style.filter = 'alpha(opacity :'+obj.alpha +')';
		 		obj.style.opacity = obj.alpha/100;  // 兼容 Chrome 和 FF
		 	}
		 },30);
	}
</script>
<body>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
</body>
</html>